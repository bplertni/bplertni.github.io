<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PGN Parser</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>

<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js"></script>
  <h1 id="title">PGN Parser Prototype</h1>
  <span class="copy-alert"></span>
  <div class="flex-container">
    <div class="box input-box">
      <label for="pgnTextArea">Paste PGNs here:</label><br />
      <textarea id="pgnTextArea"></textarea><br />
      <button id="createGameButton" onclick="submitChessGame()">
        Submit
      </button>
      <button id="importButton" onclick="importChessGame()">
        Import
      </button>
      <button id="clearTableButton" onclick="clearTables()">
        Clear
      </button>
      <button id="exportJSONButton" onclick="exportChessGame()">
        Export
      </button>
    </div>
    <div class="box listbox-area" id="listbox">
      <div>
        <span class="listbox-label copy-alert">Imported/Submitted PGNs: </span><span class="copy-alert" id="copyAlert"></span>
        <div class="listbox-container">
          <ul id="import-pgn-list">
          </ul>
        </div>
      </div>
    </div>
    <!-- Sample PGNs 
      <div class="box listbox-area" id="listbox">
        <div>
          <span class="listbox-label copy-alert">Sample PGNs: </span><span class="copy-alert" id="copyAlert"></span>
          <div class="listbox-container">
            <ul id="pgn-list">
            </ul>
          </div>
        </div>
      </div>
    -->
    <div id="export-area">
      <label id="json-label" for="JSONTextArea">Exported JSON Preview</label><br />
      <textarea id="JSONTextArea"></textarea>
    </div>
  </div>
  <div id="table-label">
    <label for="div100">XFEN Array Table</label><br />
  </div>
  <div id="div100">
    <div id="header-wrapper">
      <table id="tbl100">
        <thead id="hed100">
          <tr id="tr100"></tr>
        </thead>
        <tbody id="bdy100"></tbody>
      </table>
    </div>
  </div>
  <div id="table-label">
    <label for="debug-div">Debug Information Table</label><br />
  </div>
  <div id="debug-div">
    <table id="debug-head">
      <thead>
        <tr id="debug-row">
          <th>Turn</th>
          <th>PGN/SAN</th>
          <th>From</th>
          <th>To</th>
          <th>Piece</th>
          <th>Color</th>
          <th>xPiece</th>
          <th id="FEN">FEN</th>
        </tr>
      </thead>
      <tbody id="debug-body">
        <!-- The table body will be populated dynamically -->
      </tbody>
    </table>
  </div>


<script src="script.js"></script>

<!-- JavaScript for sample PGNs box -->

<!--
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const listItems = document.querySelectorAll("#pgn-list li");
      const copyAlert = document.getElementById("copyAlert"); // Select the unique copy alert element
      const pgnTextArea = document.getElementById("pgnTextArea");
      const jsonTextArea = document.getElementById("JSONTextArea");
      const createGameButton = document.getElementById("createGameButton");
      const exportJSONButton = document.getElementById("exportJSONButton");
  
      const tooltip = document.createElement("span");
      tooltip.classList.add("custom-tooltip");
      document.body.appendChild(tooltip); // Append the tooltip element to the body
  
      listItems.forEach((item) => {
        item.addEventListener("click", () => {
          // Clear textareas
          pgnTextArea.value = "";
          jsonTextArea.value = "";
  
          // Remove the highlight from any previously selected item
          const selected = document.querySelector(".selected");
          if (selected) {
            selected.classList.remove("selected");
          }
  
          // Add the highlight to the clicked item
          item.classList.add("selected");
  
          // Show the "copied!" alert
          copyAlert.textContent = "Copied!";
          copyAlert.classList.add("show");
  
          // Copy the content to clipboard
          let textToCopy = formatPGN(item.textContent);
          copyToClipboard(textToCopy);
  
  
          // Set the tooltip text to the full content of the <li> element
          tooltip.textContent = textToCopy;
  
          // Paste the selected content into the pgnTextArea and jsonTextArea
          pgnTextArea.value = textToCopy;
          
          // Press 'submit' then 'export' button
          processChessGame();
          jsonTextArea.value = exportChessGame();
  
          // After a delay, remove the copy alert tooltip
          setTimeout(() => {
            copyAlert.textContent = "";
            copyAlert.classList.remove("show");
          }, 1500); // Adjust the delay (in milliseconds) as needed
        });
      });
    });
  </script>
-->
</body>

</html>